// ==UserScript==
// @name        Webcomic Keyboard Shortcuts
// @namespace   samuelphillips.net
// @description Keyboard shortcuts for multiple sites, including Spacetrawler, El Goonish Shrive, Will Save World for Gold, General Protection Fault, Gunnerkrigg Court, Fanboys Online, Manga Reader.net, Saturday Morning Breakfast Cereal, Order of the Stick, Trying Human, Drive, Cyanide & Happiness, The Meek, and The Illustrated Guide to Law.
// @include     http://www.baldwinpage.com/*
// @include     https://www.baldwinpage.com/*
// @include     http://www.egscomics.com/*
// @include     https://www.egscomics.com/*
// @include     http://willsaveworldforgold.com/*
// @include     https://willsaveworldforgold.com/*
// @include     http://www.gpf-comics.com/*
// @include     https://www.gpf-comics.com/*
// @include     http://www.gunnerkrigg.com/*
// @include     https://www.gunnerkrigg.com/*
// @include     http://fanboys-online.com/*
// @include     https://fanboys-online.com/*
// @include     http://mangareader.net/*
// @include     https://mangareader.net/*
// @include     http://www.smbc-comics.com/*
// @include     https://www.smbc-comics.com/*
// @include     http://www.giantitp.com/*
// @include     https://www.giantitp.com/*
// @include     http://www.tryinghuman.com/*
// @include     https://www.tryinghuman.com/*
// @include     http://www.drivecomic.com/*
// @include     https://www.drivecomic.com/*
// @include     http://explosm.net/*
// @include     https://explosm.net/*
// @include     http://www.meekcomic.com/*
// @include     https://www.meekcomic.com/*
// @include     http://lawcomic.net/*
// @include     https://lawcomic.net/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
// @version     1.5beta
// @grant       none
// ==/UserScript==

const site_conf = {"willsaveworldforgold.com": {"next": ".navi-next", "parenting": [0, 0], "name": "Will Save World for Gold", "prev": ".navi-prev"}, "www.baldwinpage.com": {"next": "a[rel=next]", "parenting": [0, 0], "name": "Spacetrawler", "prev": "a[rel=prev]"}, "fanboys-online.com": {"next": ".next", "parenting": [0, 0], "name": "Fanboys Online", "prev": ".prev"}, "www.egscomics.com": {"next": ".next", "parenting": [0, 0], "name": "El Goonish Shrive", "prev": ".prev"}, "www.drivecomic.com": {"next": "#comic-next a", "parenting": [0, 0], "name": "Drive", "prev": "#comic-previous a"}, "www.gpf-comics.com": {"next": ".nav_link_forward a:first-child", "parenting": [0, 0], "name": "General Protection Fault", "prev": ".nav_link_back a:last-child"}, "www.tryinghuman.com": {"next": "[rel=next]", "parenting": [0, 0], "name": "Trying Human", "prev": "[rel=prev]"}, "www.gunnerkrigg.com": {"next": ".extra .nav .right", "parenting": [0, 0], "name": "Gunnerkrigg Court", "prev": ".extra .nav .left"}, "www.smbc-comics.com": {"next": "a.next", "parenting": [0, 0], "name": "Saturday Morning Breakfast Cereal", "prev": "a.prev"}, "www.meekcomic.com": {"next": "a.comic-nav-next", "parenting": [0, 0], "name": "The Meek", "prev": "a.comic-nav-previous"}, "www.giantitp.com": {"next": "a > img[alt=\"Next Comic\"]", "parenting": [1, 1], "name": "Order of the Stick", "prev": "a > img[alt=\"Previous Comic\"]"}, "explosm.net": {"next": "a.next-comic", "parenting": [0, 0], "name": "Cyanide & Happiness", "prev": "a.previous-comic"}, "lawcomic.net": {"next": "a[rel=next]", "parenting": [0, 0], "name": "The Illustrated Guide to Law", "prev": "a[rel=prev]"}, "mangareader.net": {"next": ".next", "parenting": [0, 0], "name": "Manga Reader.net", "prev": ".prev"}};

// Generated by LiveScript 1.5.0
(function(){
  var KEY_CODE_LEFT, KEY_CODE_RIGHT, sitecfg;
  KEY_CODE_LEFT = 37;
  KEY_CODE_RIGHT = 39;
  sitecfg = site_conf[window.location.hostname];
  $(function(){
    var next, prev, i$, to$, _;
    next = document.querySelector(sitecfg.next);
    prev = document.querySelector(sitecfg.prev);
    for (i$ = 0, to$ = sitecfg.parenting[0]; i$ < to$; ++i$) {
      _ = i$;
      next = next.parentElement;
    }
    for (i$ = 0, to$ = sitecfg.parenting[1]; i$ < to$; ++i$) {
      _ = i$;
      prev = prev.parentElement;
    }
    $(window).keydown(function(e){
      if (prev != null && e.keyCode === KEY_CODE_LEFT) {
        e.preventDefault();
        location.href = prev.href;
      } else if (next != null && e.keyCode === KEY_CODE_RIGHT) {
        console.log("moving fwd");
        e.preventDefault();
        location.href = next.href;
      }
    });
    console.log("Webcomic Keyboard Shortcuts enabled; " + ("this site hosts " + sitecfg.name));
    if (next == null) {
      console.log("Will not be able to move forward on this page");
    }
    if (prev == null) {
      console.log("Will not be able to move backwards on this page");
    }
  });
}).call(this);
